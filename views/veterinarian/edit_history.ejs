<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>แก้ไขประวัติการรักษา</title>

  <%- include('../partials/link') %>
</head>
<body>
  <div class="container max-w-3xl mx-auto">
     
  <!-- Header -->
  <div class="text-center">
     <%- include('../partials/header_vet') %>
    <h1 class="text-xl font-bold text-primary22 flex justify-center items-center gap-2">
      <i class="fas fa-edit text-primary2"></i>
      แก้ไขประวัติการรักษา
    </h1>
    <p class="text-gray-700 mt-1">อัปเดตข้อมูลการรักษาของสัตว์เลี้ยง</p>
  </div>

  <!-- Edit Form -->
  <form action="/veterinarian/edit_history/<%= treatment.treatment_id %>" method="POST" class="bg-white rounded-xl shadow-md p-6 space-y-6">
    <input type="hidden" name="booking_id" value="<%= treatment.booking_id %>">

    <!-- Info Card -->
    <div class=" border border-primary2 rounded-xl p-4 shadow-sm">
      <div class="flex items-center gap-2 text-primary2 font-semibold mb-2">
        <i class="fas fa-info-circle"></i>
        ข้อมูลการรักษา
      </div>
      <p class="text-gray-700 text-sm">กรุณากรอกข้อมูลการรักษาให้ครบถ้วนและถูกต้อง</p>
    </div>

    <!-- Date & Weight -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-primary2 font-semibold mb-1">
          <i class="fas fa-calendar-alt"></i> วันที่รักษา
        </label>
        <div class="  rounded-xl p-3 flex items-center gap-2">
          <i class="fas fa-clock text-gray-700"></i>
          <p class="text-gray"><%= treatment.treatment_date ? treatment.treatment_date.toISOString().slice(0,10) : '-' %></p>
        </div>
      </div>

      <div>
        <label for="pet_weight_kg" class="block text-primary2 font-semibold mb-1">
          <i class="fas fa-weight"></i> น้ำหนักสัตว์ (กก.)
        </label>
        <input type="number" id="pet_weight_kg" name="pet_weight_kg" step="0.01"
               value="<%= treatment.pet_weight_kg %>"
               placeholder="กรอกน้ำหนักสัตว์"
               required
               class="form-input">
      </div>
    </div>

    <!-- Treatment Details -->
    <div>
      <label for="treatment_details" class="block text-primary2 font-semibold mb-1">
        <i class="fas fa-stethoscope"></i> รายละเอียดการรักษา
      </label>
      <textarea id="treatment_details" name="treatment_details" rows="5"
                placeholder="กรอกรายละเอียดการรักษา เช่น อาการ วิธีการรักษา ยาที่ให้..."
                required
                class="form-input"><%= treatment.treatment_details %></textarea>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row justify-center gap-4 mt-4">
      
      <button type="button" onclick="window.history.back()"
              class="btn btn-cancel">
        <i class="fas fa-times"></i>  ยกเลิก
      </button>
      <button type="submit" class="btn btn-add">
        <i class="fas fa-save"></i>   บันทึกการเปลี่ยนแปลง
      </button>
    </div>
  </form>
</div>


  <script>
    // Add some interactivity
    document.addEventListener('DOMContentLoaded', function() {
      // Focus animation for form inputs
      const inputs = document.querySelectorAll('input, textarea');
      
      inputs.forEach(input => {
        input.addEventListener('focus', function() {
          this.parentElement.style.transform = 'scale(1.02)';
          this.parentElement.style.transition = 'all 0.3s ease';
        });
        
        input.addEventListener('blur', function() {
          this.parentElement.style.transform = 'scale(1)';
        });
      });

      // Form validation feedback
      const form = document.querySelector('form');
      const submitBtn = document.querySelector('.btn-save');
      
      form.addEventListener('submit', function(e) {
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> กำลังบันทึก...';
        submitBtn.disabled = true;
        
        // Simulate saving process (remove this in real implementation)
        setTimeout(() => {
          submitBtn.innerHTML = '<i class="fas fa-check"></i> บันทึกสำเร็จ!';
          setTimeout(() => {
            submitBtn.innerHTML = '<i class="fas fa-save"></i> บันทึกการเปลี่ยนแปลง';
            submitBtn.disabled = false;
          }, 1000);
        }, 1500);
        
      });
    });
  </script>
</body>
</html>