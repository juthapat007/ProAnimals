<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤</title>
   <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/output.css">
  <style>
    body { font-family: 'Kanit', sans-serif; background: #fdf6f9; padding:20px; }
    .container { background:#fff; padding:20px; border-radius:10px; max-width:1000px; margin:auto; box-shadow:0 2px 8px rgba(0,0,0,.1);}
    h2 { color:#d63384; margin-bottom:20px; }
    .search-box { margin-bottom:20px; }
    .search-box input { padding:8px; border:1px solid #ccc; border-radius:5px; }
    .search-box button { padding:8px 16px; background:#d63384; color:#fff; border:none; border-radius:5px; cursor:pointer; }
    .search-box button:hover { background:#c2185b; }
    table { width:100%; border-collapse: collapse; margin-top:20px; }
    th, td { padding:10px; border:1px solid #eee; text-align:center; }
    th { background:#f8d7da; color:#721c24; }
    tr:nth-child(even) { background:#fdf2f4; }
  </style>
</head>
<body>
  <div class="container">
    <%- include('../partials/header_vet') %>
    <h2>üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤</h2>

    <!-- üîé ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
    <form class="search-box" method="get" action="/veterinarian/medication_history">
      <input 
        type="text" 
        name="treatment_id" 
        placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Treatment ID"
        value="<%= searchTreatmentId || '' %>">
      <button type="submit">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </form>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <table>
      <thead>
        <tr>
          <th>Dispens ID</th>
          <th>ID ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</th>
          <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢</th>
          <th>‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
          <th>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
          <th>‡∏£‡∏´‡∏±‡∏™‡∏´‡∏°‡∏≠</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏≠</th>
        </tr>
      </thead>
      <tbody>
        <% if (dispens.length > 0) { %>
          <% dispens.forEach(h => { %>
            <tr>
              <td><%= h.dispens_id %></td>
              <td><%= h.treatment_id %></td>
              <td><%= new Date(h.dispens_date).toLocaleDateString('th-TH') %></td>
              <td><%= h.medication_id %></td>
              <td><%= h.medicine_name %></td>
              <td><%= h.quantity %></td>
              <td><%= h.medicine_package %></td>
              <td><%= h.medicine_price %></td>
              <td><%= h.vet_id %></td>
              <td><%= h.vet_name %></td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr><td colspan="10">‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>
        <% } %>
      </tbody>
    </table>
  </div>
</body>
</html>
